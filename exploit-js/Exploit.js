(function(){ 'use strict';
	//replace these with your own endpoint configuration
	var	host = '127.0.0.1',
		port = '8234',
		proto = 'ws',
		path = '/s';

	var socket = new WebSocket(proto+'://'+host+':'+port+path),
		EvalContext = function(header){
			this.send = function(data, isErr){
				var errCode = (isErr) ? 'z' : '';
				socket.send(errCode+header+data);
			};
		};

	function evctx(js, c){
		return function() { return eval(js); }.call(c);
	}

	socket.onmessage = function(e){
		var d = e.data, ctx = new EvalContext(d.slice(0,8));
		try{
			evctx(d.slice(8), ctx);
		}catch(err){
			//console.log('silently fail:', err);
			ctx.send(err, true)
		}
	};
})();